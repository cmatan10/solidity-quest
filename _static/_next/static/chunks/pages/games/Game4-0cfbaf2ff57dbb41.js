(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[339],{92860:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/Game4",function(){return s(10521)}])},83545:function(e,t,s){"use strict";var a=s(85893),n=s(67294),r=s(53637),c=s(39886),l=s(54610),i=s(84082),o=s(49816),d=s(89163),h=s(87261),u=s(45281),m=s(84283),x=s(74855),p=s(55678),g=s(96941);s(71399);var b=s(46050);t.Z=e=>{let{gameData:t,gameFunctions:s}=e,[y,j]=(0,n.useState)({}),[f,k]=(0,n.useState)(""),[w,C]=(0,n.useState)(""),[N,Z]=(0,n.useState)(""),[v,S]=(0,n.useState)(!1),[B,T]=(0,n.useState)(null),[_,I]=(0,n.useState)(null),[A,E]=(0,n.useState)(!1),[G,P]=(0,n.useState)(null),H=(0,n.useRef)(null),{walletAddress:L,factoryContract:Y,nftContract:D,web3:O}=(0,n.useContext)(b.S);(0,n.useEffect)(()=>{O&&O.utils.isAddress(f)&&T(new O.eth.Contract(t.abi,f)),O&&t.abi2&&O.utils.isAddress(w)&&I(new O.eth.Contract(t.abi2,w))},[f,w,O,t.abi,t.abi2]),(0,n.useEffect)(()=>{let e=async()=>{if(L&&D){let e=await D.methods.balanceOf(L,t.badgeId).call();Z(e)}};e()},[L,D,t.badgeId]);let F=(e,t)=>{j({...y,[t]:e.target.value})},M=async()=>{try{S(!0);let e=await Y.methods.deploy(t.id).send({from:L}),s=e.events.DeployInstance;s?(k(O.utils.toChecksumAddress("0x".concat(e.logs[0].topics[1].slice(-40)))),t.abi2&&e.logs[1]&&C(O.utils.toChecksumAddress("0x".concat(e.logs[1].topics[1].slice(-40)))),t.showTransactionHash&&P(e.transactionHash),p.Am.success("Game instance(s) created successfully!")):p.Am.error("Game creation failed.")}catch(e){p.Am.error("Game creation failed. Please ensure your wallet is connected."),console.error(e)}finally{S(!1)}},X=(e,s)=>{s(p.Am,B,y,L,D,t.badgeId,O,_)};return(0,a.jsxs)(r.Z,{className:"bg-primary-black overflow-hidden",style:{paddingBottom:"30px",minHeight:"100vh"},children:[(0,a.jsx)(g.wp,{}),(0,a.jsx)(p.Ix,{}),(0,a.jsx)("h1",{className:"game-title title-color",style:{paddingTop:"20px",paddingBottom:"20px"},children:(0,a.jsx)("b",{children:t.title})}),(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(x.CopyToClipboard,{text:t.code,children:(0,a.jsx)(i.Z,{className:"button-copy",children:"Copy code"})}),(0,a.jsx)(u.Z,{language:"javascript",style:m.YC,ref:H,customStyle:{margin:"0"},children:t.code})]})})}),t.code1&&(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(x.CopyToClipboard,{text:t.code1,children:(0,a.jsx)(i.Z,{className:"button-copy",children:"Copy code"})}),(0,a.jsx)(u.Z,{style:m.YC,ref:H,customStyle:{margin:"0"},children:t.code1})]})})}),(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(o.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Game Description"})}),(0,a.jsx)("p",{children:t.description}),(0,a.jsx)("br",{}),(0,a.jsx)(i.Z,{onClick:M,className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#c97539",color:"white"},children:v?"Creating...":"Create Instance"})]})}),f&&!v&&(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("h3",{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Your Instance Address:"})}),(0,a.jsx)("p",{style:{wordBreak:"break-all",color:"#c97539"},children:f}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Your Hacking Instance Address:"})}),(0,a.jsx)("p",{style:{wordBreak:"break-all",color:"#c97539"},children:w})]})]})}),f&&!v&&t.hint&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{onClick:()=>E(!A),className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#355f7d",color:"white",marginBottom:"17px",marginLeft:"12px"},children:A?"Hide Hint":"Show Hint"}),A&&(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginTop:"10px"},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(o.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Hint"})}),(0,a.jsxs)("p",{children:[t.hint,t.showTransactionHash&&G&&(0,a.jsxs)("span",{style:{wordBreak:"break-all",color:"#c97539"},children:[" ",G,"."]}),t.hintLink&&(0,a.jsxs)("span",{children:[" You can read more ",(0,a.jsx)("a",{href:t.hintLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#c97539"},children:"here"}),"."]}),t.hintLink2&&(0,a.jsxs)("span",{children:[" and ",(0,a.jsx)("a",{href:t.hintLink2,target:"_blank",rel:"noopener noreferrer",style:{color:"#c97539"},children:"here"}),"."]})]})]})})]}),f&&!v&&t.functions.map((e,t)=>(0,a.jsx)(c.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(o.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:e.label})}),e.inputs.map((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{children:(0,a.jsx)(h.Z,{className:"py-1 rounded-[12px]",style:{color:"black"},placeholder:e.placeholder,onChange:t=>F(t,e.name)})},t),(0,a.jsx)("br",{})]})),(0,a.jsx)(i.Z,{className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#355f7d",color:"white"},onClick:()=>X(e.functionName,s[e.functionName]),children:e.buttonText})]})},t)),N>0&&(0,a.jsx)("div",{style:{textAlign:"center",color:"#c97539",marginTop:"20px"},children:(0,a.jsxs)("strong",{children:["Congratulations! You Got A Badge ",(0,a.jsx)("i",{className:"fas fa-medal",style:{fontSize:"20px"}})]})})]})}},10521:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(85893);s(67294);var n=s(83545),r=JSON.parse('[{"stateMutability":"payable","type":"receive"}]');let c=async(e,t,s,a,n,r,c)=>{try{let s=await c.eth.getBalance(t.options.address);"1"===s&&e("Well done! You have solved this level!",{autoClose:5e3});let l=await n.methods.balanceOf(a,r).call();l<1&&(await n.methods.mint(r,t.options.address).send({from:a}),e.success("Minting completed successfully!"))}catch(t){console.error("Error in checkPayableGame function:",t),e.error("Transaction failed: ".concat(t.message))}},l={id:4,title:"Payable Contract",description:"Dive into the receive function in Solidity. Learn and ensure smooth interactions.\n                To accomplish this task, you need to understand the receive function in Solidity, its purpose, when it's triggered, \n                and how to interact with it by sending Ether to the contract.",code:'// SPDX-License-Identifier: MIT\n    pragma solidity ^0.8.10;\n    \n    contract PayableContract {\n        receive() external payable {\n            require(msg.value == 1 wei, "Incorrect amount received");\n        }\n    }',abi:r,badgeId:4,hint:"Interact with the contract using Remix. The receive function is triggered by plain Ether transfers without calldata.",hintLink:"https://docs.soliditylang.org/en/v0.8.10/contracts.html?highlight=fallback#receive-ether-function",functions:[{label:"Check Payable Game",functionName:"checkPayableGame",buttonText:"Submit",inputs:[]}]};var i=()=>(0,a.jsx)(n.Z,{gameData:l,gameFunctions:{checkPayableGame:c}})}},function(e){e.O(0,[931,318,941,774,888,179],function(){return e(e.s=92860)}),_N_E=e.O()}]);