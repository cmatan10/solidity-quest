(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[339],{92860:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/Game4",function(){return s(10521)}])},83545:function(e,t,s){"use strict";var a=s(85893),c=s(67294),l=s(53637),n=s(39886),r=s(54610),o=s(84082),i=s(49816),d=s(89163),h=s(87261),u=s(45281),m=s(84283),x=s(74855),p=s(44173),g=s(96941);s(71399);var b=s(46050);t.Z=e=>{let{gameData:t,gameFunctions:s}=e,[j,y]=(0,c.useState)({}),[f,C]=(0,c.useState)(""),[w,k]=(0,c.useState)(""),[N,Z]=(0,c.useState)(""),[v,S]=(0,c.useState)(!1),[B,T]=(0,c.useState)(null),[I,A]=(0,c.useState)(null),[_,G]=(0,c.useState)(!1),[P,E]=(0,c.useState)(null),H=(0,c.useRef)(null),{walletAddress:Y,factoryContract:D,nftContract:O,web3:F}=(0,c.useContext)(b.S);(0,c.useEffect)(()=>{F&&F.utils.isAddress(f)&&T(new F.eth.Contract(t.abi,f)),F&&t.abi2&&F.utils.isAddress(w)&&A(new F.eth.Contract(t.abi2,w))},[f,w,F,t.abi,t.abi2]),(0,c.useEffect)(()=>{let e=async()=>{if(Y&&O){let e=await O.methods.balanceOf(Y,t.badgeId).call();Z(e)}};e()},[Y,O,t.badgeId]);let L=(e,t)=>{y({...j,[t]:e.target.value})},M=async()=>{try{S(!0);let e=await D.methods.deploy(t.id).send({from:Y}),s=e.events.DeployInstance;s?(C(F.utils.toChecksumAddress("0x".concat(e.logs[0].topics[1].slice(-40)))),t.abi2&&e.logs[1]&&k(F.utils.toChecksumAddress("0x".concat(e.logs[1].topics[1].slice(-40)))),t.showTransactionHash&&E(e.transactionHash),p.Am.success("Game instance(s) created successfully!")):p.Am.error("Game creation failed.")}catch(e){p.Am.error("Game creation failed. Please ensure your wallet is connected."),console.error(e)}finally{S(!1)}},X=(e,s)=>{s(p.Am,B,j,Y,O,t.badgeId,F,I)};return(0,a.jsxs)(l.Z,{className:"bg-primary-black overflow-hidden",style:{paddingBottom:"30px",minHeight:"100vh"},children:[(0,a.jsx)(g.wp,{}),(0,a.jsx)(p.Ix,{}),(0,a.jsx)("h1",{className:"game-title title-color",style:{paddingTop:"20px",paddingBottom:"20px"},children:(0,a.jsx)("b",{children:t.title})}),(0,a.jsx)(n.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(x.CopyToClipboard,{text:t.code,children:(0,a.jsx)(o.Z,{className:"button-copy",children:"Copy code"})}),(0,a.jsx)(u.Z,{language:"javascript",style:m.YC,ref:H,customStyle:{margin:"0"},children:t.code})]})})}),t.code1&&(0,a.jsx)(n.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(x.CopyToClipboard,{text:t.code1,children:(0,a.jsx)(o.Z,{className:"button-copy",children:"Copy code"})}),(0,a.jsx)(u.Z,{style:m.YC,ref:H,customStyle:{margin:"0"},children:t.code1})]})})}),(0,a.jsx)(n.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(i.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Game Description"})}),(0,a.jsx)("p",{children:t.description}),(0,a.jsx)("br",{}),(0,a.jsx)(o.Z,{onClick:M,className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#c97539",color:"white"},children:v?"Creating...":"Create Instance"})]})}),f&&!v&&(0,a.jsx)(n.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("h3",{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Your Instance Address:"})}),(0,a.jsx)("p",{style:{wordBreak:"break-all",color:"#c97539"},children:f}),I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Your Hacking Instance Address:"})}),(0,a.jsx)("p",{style:{wordBreak:"break-all",color:"#c97539"},children:w})]})]})}),f&&!v&&t.hint&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{onClick:()=>G(!_),className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#355f7d",color:"white",marginBottom:"17px",marginLeft:"12px"},children:_?"Hide Hint":"Show Hint"}),_&&(0,a.jsx)(n.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginTop:"10px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(i.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:"Hint"})}),(0,a.jsxs)("p",{children:[t.hint,t.showTransactionHash&&P&&(0,a.jsxs)("span",{children:[" ",P,"."]})]})]})})]}),f&&!v&&t.functions.map((e,t)=>(0,a.jsx)(n.Z,{className:"game-card",style:{backgroundColor:"#000000",color:"white",marginBottom:"20px"},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(i.Z,{className:"desc-title title-color",children:(0,a.jsx)("b",{children:e.label})}),e.inputs.map((e,t)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{children:(0,a.jsx)(h.Z,{className:"py-1 rounded-[12px]",style:{color:"black"},placeholder:e.placeholder,onChange:t=>L(t,e.name)})},t),(0,a.jsx)("br",{})]})),(0,a.jsx)(o.Z,{className:"flex h-fit py-2 px-4 bg-[#25618B] rounded-[12px] gap-[6px]",style:{backgroundColor:"#355f7d",color:"white"},onClick:()=>X(e.functionName,s[e.functionName]),children:e.buttonText})]})},t)),N>0&&(0,a.jsx)("div",{style:{textAlign:"center",color:"#c97539",marginTop:"20px"},children:(0,a.jsxs)("strong",{children:["Congratulations! You Got A Badge ",(0,a.jsx)("i",{className:"fas fa-medal",style:{fontSize:"20px"}})]})})]})}},10521:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(85893);s(67294);var c=s(83545),l=JSON.parse('[{"stateMutability":"payable","type":"receive"}]');let n=async(e,t,s,a,c,l,n)=>{try{let s=await n.eth.getBalance(t.options.address);"1"===s&&e("Well done! You have solved this level!",{autoClose:5e3});let r=await c.methods.balanceOf(a,l).call();r<1&&(await c.methods.mint(l,t.options.address).send({from:a}),e.success("Minting completed successfully!"))}catch(t){console.error("Error in checkPayableGame function:",t),e.error("Transaction failed: ".concat(t.message))}},r={id:4,title:"Payable Contract",description:"Dive into the receive function in Solidity. Learn and ensure smooth interactions.",code:'// SPDX-License-Identifier: MIT\n    pragma solidity ^0.8.10;\n    \n    contract PayableContract {\n        receive() external payable {\n            require(msg.value == 1 wei, "Incorrect amount received");\n        }\n    }',abi:l,badgeId:4,hint:"Interact with the contract using Remix. The receive function is triggered by plain Ether transfers without calldata.",functions:[{label:"Check Payable Game",functionName:"checkPayableGame",buttonText:"Submit",inputs:[]}]};var o=()=>(0,a.jsx)(c.Z,{gameData:r,gameFunctions:{checkPayableGame:n}})}},function(e){e.O(0,[817,311,941,774,888,179],function(){return e(e.s=92860)}),_N_E=e.O()}]);